let theConfigs = {
	"groom": {
		"fullname": "Asep Maulana Nuriman",
		"nickname": "Maunklana"
	},
	"bride": {
		"fullname": "Nabila Dea Santika",
		"nickname": "Dila"
	},
	"events": {
		"date": "2023-03-11",
		"reception": {
			"time": "10:00"
		},
		"akad": {
			"time": "09:00"
		}
	},
	"pagedomain": "asepnabila.link",
	"grecaptchasitekey": "6LfhB5wgAAAAAE2vZtWH91E7daPM-KMjdem0uptU",
	"appscript": {
		"baseurl": "https://script.google.com/macros/s/",
		"deploymentid": "AKfycbyFeS9ghi4Cj44eguhffRmT1bqHrI94mYLA3pS6fjXpW5YokJq7GIAojYCp-VIaBKic"
	},
	"fingerprintjs": {
		"publictoken": "OS3SLXNyklDNGY2qQcMy",
		"customendpoint": "sr"
	},
	"galleryprewed": [{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		},
		{
			"href": "https://picsum.photos/600/400",
			"src": "https://picsum.photos/300/200",
			"title": "",
			"alt": ""
		}
	]
};

class Config {
	constructor(configs) {  // Constructor
		if(typeof configs.fingerprintjs == 'undefined'){
			 configs.fingerprintjs = {};
		}
		
		configs.fingerprintjs.url = 'https://openfpcdn.io/fingerprintjs/v3';
		if(typeof configs.fingerprintjs.publictoken != 'undefined'){
			configs.fingerprintjs.url = `https://fpcdn.io/v3/${configs.fingerprintjs.publictoken}`;
		}
		
		var dateObj = new Date(configs.events.date);
		var month = dateObj.getUTCMonth() + 1; //months from 1-12
		var day = dateObj.getUTCDate();
		var year = dateObj.getUTCFullYear();
		
		var daysNames = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jum\'at', 'Sabtu'];
		var monthsNames = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];

		configs.events.datehuman = day + " " + monthsNames[month-1] + " " + year;
		configs.events.days = daysNames[dateObj.getDay()];
		
		for (var conf in configs) {
			this[conf] = configs[conf];
			if(typeof this[conf]['fullname'] != 'undefined'){
				this[conf]['firstname'] = this[conf]['fullname'].substring(0, this[conf]['fullname'].indexOf(' '));
				this[conf]['lastname'] = this[conf]['fullname'].substring(this[conf]['fullname'].indexOf(' ') + 1);
			}
		}
	}
	
	initializing(){
		for (var conf in this) {
			if(['groom','bride','events'].indexOf(conf) !== -1){
				for (var key in this[conf]) {
					if(typeof this[conf][key] == "string"){
						let re = new RegExp(`{${conf.toUpperCase()}_${key.toUpperCase()}}`,"g");
						document.body.innerHTML = document.body.innerHTML.replace(re, this[conf][key]);
					}
					if(typeof this[conf][key] == "Object"){
						for (var keys in this[conf][key]) {
							let re = new RegExp(`{${conf.toUpperCase()}_${key.toUpperCase()}_${keys.toUpperCase()}}`,"g");
							document.body.innerHTML = document.body.innerHTML.replace(re, this[conf][key][keys]);
						}
					}
				}
			}
			
			if(conf == "galleryprewed"){
				console.log(conf);
				for (let index = 0; index < this[conf].length; ++index) {
					let img = this[conf][index];
					document.getElementById("gallery-prewed").innerHTML = document.getElementById("gallery-prewed").innerHTML + `<div class="grid-item"><a href="${img.href}?${index}"><img class="lazyload img-fluid" data-src="${img.src}?${index}"></img></a></div>`;
				}
			}
		}
		
		
		
		document.title = `The Wedding of ${this.groom.firstname} & ${this.bride.firstname}`;
		document.querySelector('meta[name="description"]').setAttribute("content", `Undangan online ${this.groom.fullname} (${this.groom.nickname}) & ${this.groom.fullname} (${this.bride.nickname})`);
	}
}

const config = new Config(theConfigs);
config.initializing();